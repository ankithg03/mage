(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1070:function(e,t,a){},1071:function(e,t,a){"use strict";(function(e){var n=a(4),s=a.n(n),r=a(5),i=a.n(r),o=a(7),u=a.n(o),d=a(6),c=a.n(d),l=a(3),p=a.n(l),m=a(8),h=a.n(m),f=a(2),g=a.n(f),v=a(1),y=(a(1072),a(76)),k=a(10).checkBEMProps,b=function(t){function a(){var e;return s()(this,a),e=u()(this,c()(a).call(this)),g()(p()(e),"handleClickOutside",(function(){e.props.close(0)})),e.state={brand:{}},e}return h()(a,t),i()(a,[{key:"renderBrandList",value:function(t){var a=this;return k(e,"div",{className:"brandOptions"},t.map((function(t){return k(e,"label",{className:"brandItem"},k(e,"input",{type:"checkbox",checked:t.check,onClick:function(){a.props.setBrandValue(t.value_string)}}),t.label)})))}},{key:"render",value:function(){var t=this.props,a=t.brandList,n=t.close;return k(e,"div",{id:"brandListPopup"},k(e,y.a,{onClick:this.handleClickOutside},k(e,"div",{className:"brandListPopupRow"},k(e,"h3",null,"Choose Brands to Filter"),a?this.renderBrandList(a):k(e,"div",null,"No Brands Available For Filter"),k(e,"div",{className:"brandBtn",onClick:function(){n(0)}}," ",k(e,"span",{className:"btn"},"Apply")))))}}]),a}(v.Component);t.a=b}).call(this,a(1))},1072:function(e,t,a){},1073:function(e,t,a){},1074:function(e,t,a){},1087:function(e,t,a){},1088:function(e,t,a){},1089:function(e,t,a){},1128:function(e,t,a){"use strict";a.r(t);var n=a(12),s=a.n(n),r=a(30),i=a.n(r),o=a(46),u=a.n(o),d=a(4),c=a.n(d),l=a(5),p=a.n(l),m=a(7),h=a.n(m),f=a(6),g=a.n(f),v=a(3),y=a.n(v),k=a(8),b=a.n(k),C=a(2),S=a.n(C),N=a(1),P=a.n(N),_=a(887),A=a(14),O=a(193),L=a(10).checkBEMProps,w=function(e){function t(){return c()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this;return L(P.a,"div",null,L(P.a,"ul",{className:"inline"},this.props.children.map((function(t,a){var n=a===e.props.selected?"selected":"";return L(P.a,"li",{onClick:function(){e.props.selectTab(a)},className:n,key:a},t.props.title)}))),L(P.a,"div",{className:"tab"},this.props.children[this.props.selected]))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null}}]),t}(_.a),F=Object(O.a)(null,(function(e){return{showNotification:function(t,a){return e(Object(A.c)(t,a))}}}))(w),D=a(888),I=a(19),R=a.n(I),B=a(299),E=(a(1070),a(10).checkBEMProps),x=function(e){function t(){return c()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.columnData,a=e.sortProduct,n=e.componentNames,s=e.tableName,r=e.pageData,i=e.sortValue,o=e.sortNum;return E(P.a,"div",{id:"SalesRepCustomerCart"},E(P.a,B.b,this.props),E(P.a,"div",{className:"customer-data"},E(P.a,"table",{className:"customer-table"},E(P.a,"thead",null,E(P.a,"tr",{className:"customer-display-row"},n.map((function(e,t){return E(P.a,"td",{key:t,className:"sorting",onClick:function(){a(e.key)}},e.name,E(P.a,"i",{style:{display:i==e.key?"block":"none"},className:o%2==0?"down":"up"}))})))),r.totalItems?E(P.a,"tbody",{className:"customer-display"},t.map((function(e){return e.loading?E(P.a,"tr",null,E(P.a,"td",{rowSpan:"4"},E(P.a,"h1",null,"Loading...."))):E(P.a,"tr",{style:{color:e.qty<=0?"red":"black"},key:e.id,className:"customer-display-row-data"},n.map((function(t,a){return t.html?E(P.a,"td",{key:a,className:"sorting",dangerouslySetInnerHTML:{__html:e[t.key]}}):t.selectBox?E(P.a,"td",{key:a,className:"sorting"},E(P.a,"input",{type:"checkbox",className:"checkbox",checked:e[t.key],onChange:function(a){t.clickFunction(e.id)}})):t.box?E(P.a,"td",{key:a,className:"sorting"},E(P.a,"input",{type:"number",value:e[t.key],min:"0",onChange:function(a){t.clickFunction(a.target.value,e.id)}})):E(P.a,"td",{key:a,className:"sorting",onClick:function(){t.clickFunction&&t.clickFunction(e.id)}},e[t.key])})))}))):E(P.a,"tbody",null,E(P.a,"tr",{className:"sorting"},E(P.a,"td",{colSpan:"4"},E(P.a,"h2",null,"No items found for ",s)))))),E(P.a,B.a,this.props))}}]),t}(N.Component),M=a(98),T=a(891),q=a(332),V=a(1071),j=a(880),U=a(10).checkBEMProps,z=function(e){function t(){return c()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.columnData,a=e.pageData,n=e.sortCart,s=e.componentNames,r=e.tableName,i=e.sortValue,o=e.sortNum,u=a.totalItems;return U(P.a,"div",{id:"SalesRepCustomerCart"},U(P.a,B.b,this.props),U(P.a,"div",{className:"customer-data"},U(P.a,"table",{className:"customer-table"},U(P.a,"thead",null,U(P.a,"tr",{className:"customer-display-row"},s.map((function(e,t){return U(P.a,"td",{key:t,className:"sorting",onClick:function(){n(e.key)}},e.name,U(P.a,"i",{style:{display:i==e.key?"block":"none"},className:o%2==0?"down":"up"}))})))),u?U(P.a,"tbody",{className:"customer-display"},t.map((function(e){return e.loading?U(P.a,"tr",null,U(P.a,"td",{key:e.id,rowSpan:"4"},U(P.a,"h1",null,"Loading...."))):U(P.a,"tr",{style:{color:e.qty<=0?"red":"black"},key:e.id,className:"customer-display-row-data"},s.map((function(t,a){return t.html?U(P.a,"td",{key:a,className:"sorting",dangerouslySetInnerHTML:{__html:e[t.key]}}):t.box?U(P.a,"td",{key:a,className:"sorting"},U(P.a,"input",{type:"number",defaultValue:e[t.key],min:"0",onChange:function(a){t.clickFunction(a.target.value,e.id)}})):U(P.a,"td",{key:a,className:"sorting",onClick:function(){t.clickFunction&&t.clickFunction(e.id)}},e[t.key])})))}))):U(P.a,"tbody",null,U(P.a,"tr",null,U(P.a,"td",{colSpan:"4"},U(P.a,"h2",null,"No items found for ",r)))))),U(P.a,B.a,this.props))}}]),t}(N.Component),Q=(a(1073),a(879),a(10).checkBEMProps),J=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=h()(this,(e=g()(t)).call.apply(e,[this].concat(s))),S()(y()(a),"clickCustomer",(function(e){})),a}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.productList,a=e.updateCartItem,n=e.removeItemFromCart,r=this.state,i=r.search,o=r.currentPage,u=r.pageSize,d=r.pageSizeOptions,c=this.getSortedData(t,i,o,u),l=this.props.showProduct;return Q(P.a,"div",{id:"SalesRepExistingCustomerCart"},Q(P.a,"div",{className:"SalesRepOrderHeaderSection"},Q(P.a,"h3",{className:"SalesRepOrderHeader"},"ITEMS ORDERED"),Q(P.a,"button",{className:"btn",onClick:function(){return l("showProduct")}},"Add Products")),Q(P.a,z,s()({},this.props,{search:this.search,pageLimit:this.pageLimit,columnData:c.pageData,redirectPage:this.redirectPage,changePage:this.changePage,pageData:c.paginated,totalEntries:t.length,tableName:"Cart",pageSizeOptions:d,clickCustomer:this.clickCustomer,componentNames:[{name:"Product Name",key:"name"},{name:"SKU",key:"sku"},{name:"Short Description ",key:"description",html:1},{name:"Qty",key:"qtytoadd",box:1,clickFunction:a},{name:"Price ",key:"price"},{name:"Available Quantity",key:"qty"},{name:"Action",key:"action",clickFunction:n}]})))}}]),t}(j.a),H=Object(O.a)((function(e){return{customerCart:e.SalesRepCustomerReducer.cart}}),null)(J),G=a(88),K=a(10).checkBEMProps,X=function(e){function t(e){var a;return c()(this,t),a=h()(this,g()(t).call(this,e)),S()(y()(a),"changePage",(function(e){var t=a.state,n=t.pageSize,s=t.search,r=t.sort,i=t.brandSortList;a.getProduct(n,e,s,r,i)})),S()(y()(a),"getDataAssembled",(function(e){var t=e.products,n=[],s=a.state.selectedProduct;return t.items.forEach((function(e,t){n[t]={id:e.id,qty:e.qty||"0",price:Object(q.a)(e.price.regularPrice.amount.value,a.props.baseCurrencyCode)||"-",sku:e.sku||"-",name:e.name||"-",description:e.short_description.html||"-",select:!1,action:"X",qtytoadd:""},s&&s.find((function(e){e.id==n[t].id&&(n[t].qtytoadd=e.qtytoadd,n[t].select=e.select)}))})),n})),S()(y()(a),"addProduct",(function(e){a.setState((function(t){return t.productList.find((function(a){a.id==e&&(a.select?(a.select=!1,a.qtytoadd="",t.selectedProduct=t.selectedProduct.filter((function(t){return t.id!=e}))):(a.select=!0,a.qtytoadd=1,t.selectedProduct.push(a)))})),{productList:t.productList,selectedProduct:t.selectedProduct}}))})),S()(y()(a),"sortProduct",(function(e){if("qtytoadd"!=e&&"select"!=e&&"qty"!=e){var t,n=a.state,s=n.sortValue,r=n.sortNum,i=n.pageSize,o=n.currentPage,u=n.search;t=s==e&&r%2==0?S()({},e,"DESC"):S()({},e,"ASC"),a.setState((function(a){return a.sortValue==e?a.sortNum=a.sortNum+1:a.sortNum=0,{sortValue:e,sortNum:a.sortNum,sort:t}})),a.getProduct(i,o,u,t)}})),S()(y()(a),"updateCartQty",(function(e,t){a.setState((function(a){return a.productList.find((function(a){a.id==t&&a.select&&(a.qtytoadd=parseInt(e))})),a.selectedProduct.find((function(a){a.id==t&&a.select&&(a.qtytoadd=parseInt(e))})),{productList:a.productList,selectedProduct:a.selectedProduct}}))})),S()(y()(a),"selectProduct",(function(){var e=a.state.selectedProduct.filter((function(e){if(e.select)return e}));a.props.hideProduct(e)})),S()(y()(a),"getProduct",(function(e,t,n,s,r){a.setState({loader:1}),Object(M.b)(T.a.getProducts(e,t,n,s,r)).then((function(s){var i=s.products.total_count,o=a.getPaginated(t,e,i);a.setState((function(t){return{productList:a.getDataAssembled(s),pageData:o,totalEntries:Math.max(t.totalEntries,i),pageSize:e,search:n,brandSortList:r,loader:0,prevSearchLength:n.length}}))}))})),S()(y()(a),"search",(function(e){var t=a.state,n=t.pageSize,s=t.sort,r=t.brandSortList,i=t.prevSearchLength;clearTimeout(a.typingTimeout),a.typingTimeout=setTimeout((function(){if(e.length>2){var t=a.state,o=t.pageSize,u=t.currentPage,d=t.sort;a.getProduct(o,u,e,d,r)}else i>2&&a.getProduct(n,1,0,s,r)}),475)})),S()(y()(a),"pageLimit",(function(e){var t=a.state,n=t.currentPage,s=t.search,r=t.sort,i=t.brandSortList;a.getProduct(e,n,s,r,i),G.a.setItem("SalesRepViewProduct.pageSize",e)})),S()(y()(a),"setBrandValue",(function(e){a.setState((function(t){return t.brandList.find((function(t){t.value_string==e&&(t.check=!t.check)})),{brandList:t.brandList}}))})),S()(y()(a),"showBrands",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=a.state,n=t.pageSize,s=t.currentPage,r=t.search,i=t.sort,o=t.brandList;if(e)a.setState({showBrands:e});else{var u=[];o.map((function(e){e.check&&u.push(e.value_string)})),a.setState({showBrands:0}),a.getProduct(n,s,r,i,u.length?u:0)}})),S()(y()(a),"getPaginated",(function(e,t,a){var n,s,r=Math.ceil(a/t);if(e<1?e=1:e>r&&(e=r),r<=5)n=1,s=r;else{var i=Math.floor(2.5),o=Math.ceil(2.5)-1;e<=i?(n=1,s=5):e+o>=r?(n=r-5+1,s=r):(n=e-i,s=e+o)}var u=(e-1)*t,d=Math.min(u+t-1,a-1),c=Array.from(Array(s+1-n).keys()).map((function(e){return n+e}));return{totalItems:a,currentPage:e,pageSize:t,totalPages:r,startPage:n,endPage:s,startIndex:u,endIndex:d,pages:c}})),a.typingTimeout=null,a.state={productList:[{loading:1}],selectedProduct:[],search:0,currentPage:1,totalEntries:0,sortValue:"",brandList:[],showBrands:0,sortNum:0,pageSize:parseInt(G.a.getItem("SalesRepViewProduct.pageSize"))||50,prevSearchLength:0,loader:0,brandSortList:0,pageSizeOptions:[5,10,20,50,100],sort:{sku:"ASC"},pageData:{totalItems:0,currentPage:0,pageSize:0,totalPages:0,startPage:0,endPage:0,startIndex:0,endIndex:0,pages:[]}},a}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageSize,a=e.currentPage,n=e.search,s=e.sort,r=e.brandSortList;this.getProduct(t,a,n,s,r),this.getBrand()}},{key:"getBrand",value:function(){var e=this;Object(M.b)(T.a.getBrand()).then((function(t){var a=t.products.all_filters.find((function(e){return"brand"==e.request_var}))||0;e.setState({brandList:e.getBrandAssembled(a)})}))}},{key:"getBrandAssembled",value:function(e){var t=e.filter_items,a=[];return t.forEach((function(e,t){a[t]={id:t,value_string:e.value_string,label:e.label,check:!1}})),a}},{key:"showAllBrands",value:function(){var e=this.state,t=e.brandList;if(e.showBrands)return K(P.a,V.a,{close:this.showBrands,setBrandValue:this.setBrandValue,brandList:t})}},{key:"render",value:function(){var e=this.state,t=e.productList,a=e.pageData,n=e.totalEntries,r=e.pageSize,i=e.pageSizeOptions,o=e.loader,u=e.sortValue,d=e.sortNum;return K(P.a,"div",{id:"SalesRepCustomerProduct"},K(P.a,"div",{className:"SalesRepOrderHeaderSection product-order-header"},K(P.a,"div",{className:"header-loader"},K(P.a,"h3",{className:"SalesRepOrderHeader"},"PLEASE SELECT PRODUCTS TO ADD")),K(P.a,"div",{className:"select-product-btn"},K(P.a,"div",{className:"productLoader"},K(P.a,"div",{style:{visibility:o?"visible":"hidden"},className:"loader"})),K(P.a,"button",{id:"brand",className:"btn",onClick:this.showBrands},"Select Brand"),K(P.a,"button",{className:"btn",onClick:this.selectProduct},"Add Selected Product(s) To Order"))),this.showAllBrands(),K(P.a,x,s()({},this.props,{search:this.search,columnData:t,sortProduct:this.sortProduct,totalEntries:n,pageData:a,pageLimit:this.pageLimit,pageSize:r,pageSizeOptions:i,tableName:"Cart",sortValue:u,sortNum:d,changePage:this.changePage,totalItems:"1",componentNames:[{name:"SKU",key:"sku"},{name:"Short Description ",key:"description",html:1},{name:"Price ",key:"price"},{name:"Available Qty",key:"qty"},{name:"Select",key:"select",selectBox:1,clickFunction:this.addProduct},{name:"Qty to Add",key:"qtytoadd",box:1,clickFunction:this.updateCartQty}]})))}}]),t}(N.Component),Y=a(345),W=(a(1074),a(899)),Z=a(331),$=(a(1087),a(76)),ee=a(10).checkBEMProps,te=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=h()(this,(e=g()(t)).call.apply(e,[this].concat(s))),S()(y()(a),"handleClickOutside",(function(){a.props.close()})),a}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.sameProduct,a=e.changeCsvQty,n=e.getBulkOrderQty,s=e.close;return ee(P.a,"div",{id:"SalesRepBulkOrderPopup"},ee(P.a,$.a,{onClick:this.handleClickOutside},ee(P.a,"div",{className:"SalesRepBulkOrderPopupRow"},ee(P.a,"div",{onClick:s}," ",ee(P.a,"span",{className:"close"},"×")),ee(P.a,"h3",null,"These Products are already in cart :"),ee(P.a,"table",{className:"bundle-popup"},ee(P.a,"tr",null,ee(P.a,"th",null,"Sl"),ee(P.a,"th",null,"Name"),ee(P.a,"th",null,"Sku"),ee(P.a,"th",null,"Qty"),ee(P.a,"th",null,"New Qty")),t.map((function(e,t){return ee(P.a,"tr",{key:e.id,className:"customer-display-row-data"},ee(P.a,"td",null,t+1),ee(P.a,"td",null,e.name),ee(P.a,"td",null,e.sku),ee(P.a,"td",null,e.cartQty),ee(P.a,"td",{className:"sorting"},ee(P.a,"input",{type:"number",value:e.csvQty,min:"0",onChange:function(t){a(t.target.value,e.id)}})))}))),ee(P.a,"div",{className:"buttons"},ee(P.a,"button",{className:"btn",onClick:function(){n("replace")}},"Replace"),ee(P.a,"button",{className:"btn",onClick:function(){n("append")}},"Append")))))}}]),t}(N.Component),ae=a(177),ne=a(10).checkBEMProps,se=function(e){function t(){var e;return c()(this,t),e=h()(this,g()(t).call(this)),S()(y()(e),"removeOrigCartFromFinal",(function(t){var a=e.state.customerCartData;a.map((function(e){t.find((function(t){e.id==t.id&&(t.item_id=e.item_id)}))}));var n=[];a.map((function(e){return e.qtytoadd=0})),Array.prototype.push.apply(a,t),R()(new Map(a.map((function(e){return[e.id,e]}))).values()).map((function(e){e.item_id?n.push({item_id:e.item_id,quantity:e.qtytoadd||0,qty:e.qtytoadd||0}):n.push({sku:e.sku,quantity:e.qtytoadd||0,qty:e.qtytoadd||0})})),e.saveProductsToCart(n)})),S()(y()(e),"nextAddToCart",(function(){var t=e.state.productList,a=e.props.showNotification;t.length?e.removeOrigCartFromFinal(t):a("error","Please add product to cart")})),S()(y()(e),"showProduct",(function(t){e.setState({viewProduct:t})})),S()(y()(e),"getDataAssembled",(function(e,t){var a=[];return e.items&&e.items.forEach((function(e,n){a[n]={item_id:e.item_id||"",id:e.product.id,qtytoadd:e.qty||"-",price:Object(q.a)(e.price,t)||"-",sku:e.sku||"-",qty:e.product.qty||"-",name:e.name||"-",total:e.row_total,description:e.product.short_description.html||"-",action:"X"}})),a})),S()(y()(e),"removeItemFromCart",(function(t){e.setState((function(e){return{productList:e.productList.filter((function(e){return e.id!=t}))}}))})),S()(y()(e),"updateCartItem",(function(t,a){e.setState((function(e){return e.productList.filter((function(e){e.id==a&&(e.qtytoadd=parseInt(t))})),{productList:e.productList}}))})),S()(y()(e),"sortCart",(function(t){var a=e.state.productList.slice(0),n=e.state,s=n.sortValue,r=n.sortNum;a.sort((function(e,a){if(s==t&&r%2==0){var n=[a,e];e=n[0],a=n[1]}var i=e[t].toString().toLowerCase(),o=a[t].toString().toLowerCase();return i<o?-1:i>o?1:0})),e.setState((function(e){return e.sortValue==t?e.sortNum=e.sortNum+1:e.sortNum=0,{productList:a,sortValue:t,sortNum:e.sortNum}}))})),S()(y()(e),"hideProduct",(function(t){var a,n=[],s=[];e.setState((function(e){return t.map((function(t){a=!1,e.productList.filter((function(e){e.id==t.id&&(e.qtytoadd=parseInt(e.qtytoadd)+parseInt(t.qtytoadd),n.push(e),a=!0)})),a||s.push(t)})),Array.prototype.push.apply(e.productList,s),{viewProduct:"ShowCart",productList:e.productList,key:e.key+1}}))})),S()(y()(e),"changeCsvQty",(function(t,a){e.setState((function(e){return e.sameProduct.filter((function(n){n.id==a&&(n.csvQty=t,e.csvQty[n.sku.toLowerCase()]=t)})),{sameProduct:e.sameProduct,csvQty:e.csvQty}}))})),S()(y()(e),"getBulkOrderQty",(function(t){var a=e.state,n=a.csvProducts,s=a.csvQty;switch(n.map((function(e){e.qtytoadd=s[e.sku.toLowerCase()]})),t){case"append":e.hideProduct(n),e.setState({csvPopup:0});break;case"replace":e.replaceCsvProduct(n),e.setState({csvPopup:0})}})),S()(y()(e),"replaceCsvProduct",(function(t){var a,n=[],s=[];e.setState((function(e){return t.map((function(t){a=!1,e.productList.filter((function(e){e.id==t.id&&(e.qtytoadd=parseInt(t.qtytoadd),n.push(e),a=!0)})),a||s.push(t)})),Array.prototype.push.apply(e.productList,s),{viewProduct:"ShowCart",productList:e.productList,key:e.key+1}}))})),S()(y()(e),"close",(function(){e.setState({csvProducts:[],csvPopup:0,sameProduct:[],csvQty:""})})),S()(y()(e),"addBulkItemCart",(function(t,a){var n=e.state.productList,s=[];t.map((function(e){n.find((function(t){e.id==t.id&&s.push({id:e.id,sku:t.sku,name:t.name,cartQty:t.qtytoadd,csvQty:a[e.sku.toLowerCase()]})})),e.qtytoadd=a[e.sku.toLowerCase()]})),e.setState((function(){if(s.length)return{csvProducts:t,csvPopup:1,sameProduct:s,csvQty:a};e.hideProduct(t)}))})),e.state={viewProduct:"ShowCart",selectedProduct:[],productList:[],sortValue:"",sameProduct:[],sortNum:0,csvProducts:[],csvPopup:0,key:0,sku:0,updatePopup:0},e}return b()(t,e),p()(t,[{key:"componentWillUnmount",value:function(){(0,this.props.setMeta)(null)}},{key:"saveProductsToCart",value:function(e){var t=this,a=this.props,n=a.match.params.id,s=a.fetchCart,r=a.handleNextTab,i=a.startLoader,o=a.stopLoader;i(),Object(M.a)(Y.a.salesRepresentativeAddToCart(n,e)).then((function(){s(n).then((function(){r(1),o()}))})).catch((function(e){t.props.showNotification("error","Couldn't  add product to cart"),o()}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.customerCart,a=e.baseCurrencyCode,n=e.changePrevSelected;this.state.popupData&&n(),this.setState({productList:this.getDataAssembled(t,a),customerCartData:this.getDataAssembled(t,a),key:2})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.customerCart,n=t.baseCurrencyCode;(0,t.setMeta)({title:"Items Ordered"}),a!==e.customerCart&&this.setState({productList:this.getDataAssembled(a,n),customerCartData:this.getDataAssembled(a,n)})}},{key:"displayCart",value:function(){var e=this.state,t=e.productList,a=e.csvPopup,n=e.sameProduct,r=e.key,i=e.sortValue,o=e.sortNum;return ne(P.a,"div",{id:"SalesRepItemsOrderedTabComponent"},a?ne(P.a,te,{sameProduct:n,changeCsvQty:this.changeCsvQty,getBulkOrderQty:this.getBulkOrderQty,close:this.close}):"",ne(P.a,H,{key:r,sortCart:this.sortCart,showProduct:this.showProduct,updateCartItem:this.updateCartItem,productList:t,removeItemFromCart:this.removeItemFromCart,sortValue:i,sortNum:o}),ne(P.a,W.a,s()({addBulkItemCart:this.addBulkItemCart,hideProduct:this.hideProduct,nextAddToCart:this.nextAddToCart},this.props)))}},{key:"render",value:function(){switch(this.state.viewProduct){case"showProduct":return ne(P.a,"div",{id:"SalesRepItemsOrderedTabComponent"},ne(P.a,X,s()({},this.props,{hideProduct:this.hideProduct})));case"ShowCart":return this.displayCart()}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.updatePopup!=t.updatePopup){if(e.updatePopup){if(e.prevSelected)return{popupData:e.prevSelected};var a,n=e.popupSku,s=[],r=[];n.map((function(e){a=!1,t.productList.filter((function(t){t.id==e.id&&(t.qtytoadd=parseInt(t.qtytoadd)+parseInt(e.qtytoadd),s.push(t),a=!0)})),a||r.push(e)})),Array.prototype.push.apply(t.productList,r)}return{updatePopup:e.updatePopup,productList:t.productList,key:t.key+1}}return null}}]),t}(N.Component),re=Object(O.a)((function(e){return{customerCart:e.SalesRepCustomerReducer.cart}}),(function(e){return{fetchCart:function(t){return Z.a.fetchCustomerCart(e,t)},setMeta:function(t){return ae.a.setMeta(e,t)}}}),null,{forwardRef:!0})(se),ie=a(32),oe=a(881),ue=a(11),de=a(71),ce="billingAddress",le=a(10).checkBEMProps,pe=function(e){function t(){return c()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"renderActions",value:function(){var e=this;return le(P.a,"div",{className:"save-address"},le(P.a,"label",{className:"save-address-label"},le(P.a,de.a,{type:"checkbox",name:"submitbilling",id:"submitbilling",onChange:function(t,a){e.props.handleSaveAddress(a,"billing")}}),le(P.a,"p",{className:"save-address-book-text"},"Save In AddressBook")))}},{key:"headerActions",value:function(){return le(P.a,"div",{className:"head-text-billing"},le(P.a,"p",null,"Select From Existing Customer Address:"))}},{key:"extraField",value:function(){return this.props.allAddressField}}]),t}(oe.a),me=Object(ue.b)((function(e){return{countries:e.ConfigReducer.countries}}),null)(pe),he=a(10).checkBEMProps,fe=function(e){function t(){return c()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"getTitle",value:function(){return"SHIPPING ADDRESS"}},{key:"getSectionName",value:function(){return"shippingAddress"}},{key:"check",value:function(e,t){return t=!0===t?1:0,this.setFieldValue(e,t),this.props.sameAsBillingCheck(t)}},{key:"headerActions",value:function(){var e=this;return he(P.a,"div",null,he(P.a,"div",{className:"same-as-billing"},he(P.a,"label",{className:"same-billing-label"},he(P.a,de.a,{type:"checkbox",id:"same_as_billing",name:"same_as_billing",placeholder:"Same As Billing Address",onChange:function(t,a){return e.check("same_as_billing",a)},checked:this.getFieldValue("same_as_billing")}),he(P.a,"span",null,"Same As Billing Address"))),he(P.a,"div",{className:"head-text"},he(P.a,"p",null,"Select From Existing Customer Address:")))}},{key:"isDisabled",value:function(){return this.props.isDisabled}},{key:"renderActions",value:function(){var e=this;return he(P.a,"div",{className:"save-address"},he(P.a,"label",{className:"save-address-label"},he(P.a,de.a,{type:"checkbox",name:"submitshipping",id:"submitshipping",onChange:function(t,a){e.props.handleSaveAddress(a,"shipping")}}),he(P.a,"p",{className:"save-address-book-text"},"Save In AddressBook")))}},{key:"extraField",value:function(){return!0===this.isDisabled()?he(P.a,de.a,{type:"select",name:"all_address",placeholder:"All Addresses"}):this.props.allAddressField}}]),t}(oe.a),ge=Object(ue.b)((function(e){return{countries:e.ConfigReducer.countries}}),null)(fe),ve=(a(1088),a(9)),ye=new(function(){function e(){c()(this,e)}return p()(e,[{key:"getEstimateShippingCosts",value:function(e,t){return new ve.a("salesRepresentativeEstimateShippingCosts").addArgument("customerId","Int!",e).addArgument("address"," EstimateShippingCostsAddress!",this.getEstimateShippingCostsAddressFields(t)).addFieldList(this.getEstimateShippingCostsDetailsFields())}},{key:"getSaveAddressInformation",value:function(e,t,a,n,s){var r={billing_address:t,shipping_address:a,shipping_carrier_code:n,shipping_method_code:s};return new ve.a("salesRepresentativeSaveAddressInformation").addArgument("customerId","Int!",e).addArgument("addressInformation"," SaveAddressInformation!",r).addFieldList(this.getSaveAddressInformationDetailsFields())}},{key:"getSavePaymentInformationAndPlaceOrder",value:function(e,t,a,n,s,r){var i={billing_address:t,paymentMethod:{method:a}};return new ve.a("salesRepresentativeSavePaymentInformationAndPlaceOrder").addArgument("customerId","Int!",e).addArgument("paymentInformation"," PaymentInformation!",i).addArgument("notifyCustomer","Boolean",n).addArgument("appendComment","Boolean",s).addArgument("orderCommentLength","Int",r).addFieldList(this.getSavePaymentInformationAndPlaceOrderDetailsFields())}},{key:"getCustomerApplyCoupon",value:function(e,t){return new ve.a("salesRepresentativeCustomerApplyCoupon").addArgument("customerId","Int!",e).addArgument("coupon_code","String!",t).addFieldList(this.getApplyCouponStatus())}},{key:"getCustomerRemoveCoupon",value:function(e){return new ve.a("salesRepresentativeCustomerRemoveCoupon").addArgument("customerId","Int!",e).addFieldList(this.getRemoveCouponStatus())}},{key:"getAddOrderComment",value:function(e,t,a,n,s){return new ve.a("salesRepresentativeAddOrderComment").addArgument("customerId","Int!",e).addArgument("id","Int!",t).addArgument("comment","String!",a).addArgument("notify","Boolean",n).addArgument("visibleOnFront","Boolean",s).addFieldList(this.getAddOrderCommentStatus())}},{key:"getEstimateShippingCostsAddressFields",value:function(e){var t=e.city,a=e.country_id,n=e.customer_id,s=e.email,r=e.firstname,i=e.lastname,o=e.postcode,u=e.region,d=e.region_code,c=e.region_id,l=e.same_as_billing,p=e.street,m=e.telephone;return{city:t,country_id:a,customer_id:n,email:s,firstname:r,lastname:i,postcode:o,region:u,region_code:d,region_id:c,same_as_billing:l,street:p,telephone:void 0!==m&&m}}},{key:"getEstimateShippingCostsDetailsFields",value:function(){return["amount","available","base_amount","carrier_code","carrier_title","error_message","method_code","method_title","price_excl_tax","price_incl_tax"]}},{key:"getSaveAddressInformationDetailsFields",value:function(){return[new ve.a("payment_methods").addFieldList(["code","title"]),new ve.a("totals").addFieldList(["base_currency_code","subtotal","grand_total","discount_amount"])]}},{key:"getSavePaymentInformationAndPlaceOrderDetailsFields",value:function(){return["increment_id","orderID","order_token"]}},{key:"getApplyCouponStatus",value:function(){return["message","status"]}},{key:"getRemoveCouponStatus",value:function(){return["message","status"]}},{key:"getAddOrderCommentStatus",value:function(){return["message","status"]}}]),e}()),ke=a(10).checkBEMProps,be=function(e){function t(){return c()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"checked",value:function(e,t,a,n){n&&this.props.getPayment(e,t,a,n)}},{key:"render",value:function(){var e=this,t=this.props.shipping;return ke(P.a,"div",{className:"methods"},t.salesRepresentativeEstimateShippingCosts.length?t.salesRepresentativeEstimateShippingCosts.map((function(t,a){return ke(P.a,"div",null,ke(P.a,"p",null,t.carrier_title),ke(P.a,"hr",null),ke(P.a,"div",{className:"method",key:t.carrier_code},ke(P.a,"label",{className:"shipping-label"},ke(P.a,"input",{type:"radio",name:"shipping_method",id:"shipping_method"+a,defaultChecked:0===a,onChange:function(a){return e.checked(t.method_code,t.carrier_code,t.amount,a)}}),ke(P.a,"span",null,t.method_title,"-",Object(q.a)(t.amount,e.props.currency)))))})):"Shipping not available for the selected Country ")}}]),t}(N.Component),Ce=a(10).checkBEMProps,Se=function(e){function t(){return c()(this,t),h()(this,g()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"checked",value:function(e,t){t&&this.props.getSelectedPaymentMethod(e)}},{key:"render",value:function(){var e=this,t=this.props.paymentmethod;return Ce(P.a,"div",{className:"methods"},t.salesRepresentativeSaveAddressInformation?t.salesRepresentativeSaveAddressInformation.payment_methods.map((function(t,a){return Ce(P.a,"div",{className:"method",key:t.code},Ce(P.a,"label",{className:"payment-label"},Ce(P.a,"input",{type:"radio",name:"payment_method",id:"payment_method"+t.code,defaultChecked:0===a,onChange:function(a){return e.checked(t.code,a)}}),Ce(P.a,"span",null,t.title)))})):"")}}]),t}(N.Component),Ne=a(79),Pe=a(25),_e=a(134),Ae=new(function(){function e(){c()(this,e)}return p()(e,[{key:"handle",value:function(e,t){e.orderID;t.history.push("/salesrep/customer/order/confirm")}}]),e}()),Oe=S()({},"_default_order_handler",Ae),Le={},we=a(10).checkBEMProps,Fe=function(e){function t(){var e,a,n;c()(this,t);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return n=h()(this,(e=g()(t)).call.apply(e,[this].concat(r))),S()(y()(n),"state",(a={},S()(a,ce,{default_billing:!0}),S()(a,"shippingAddress",{default_shipping:!0}),S()(a,Le,{default_shipping:!0}),S()(a,"saveInAddressBook",{}),S()(a,"email",""),S()(a,"showShippingandPaymentMethods",!1),S()(a,"shipping_methods",{}),S()(a,"payment_method",{}),S()(a,"selected_payment_method",""),S()(a,"group",""),S()(a,"coupon",""),S()(a,"couponStatus",!0),S()(a,"couponMessage",""),S()(a,"getDiscount",!1),S()(a,"append_comment",!0),S()(a,"email_order_confirmation",!0),S()(a,"order_history",""),S()(a,"orderData",{}),S()(a,"getCouponButton",!0),S()(a,"applyCouponMessage",!0),S()(a,"showPaymentMethod",!1),S()(a,"isDisabledbilling",!1),S()(a,"isDisabledshipping",!1),S()(a,"allAddress",{}),S()(a,"selectedAddressBilling",{}),S()(a,"selectedAddressShipping",{}),S()(a,"visibleOnFront",!1),S()(a,"notifyEmail",!0),S()(a,"shipping_amount",0),a)),n}var a;return b()(t,e),p()(t,[{key:"componentWillUnmount",value:function(){(0,this.props.setMeta)(null)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.notifyUpdate,n=t.currentCustomer;(0,t.setMeta)({title:"Account Information"}),n?this.setCustomerAddressValue():a().then((function(){e.props.currentCustomer&&e.setCustomerAddressValue()}))}},{key:"getShippingMutation",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.state.shippingAddress)),a=t;a.email=this.state.email,a.region=t.region.region,this.props.startLoader(),Object(M.a)(ye.getEstimateShippingCosts(this.props.customer_id,a)).then((function(t){e.setState({shipping_methods:t})})).finally((function(){e.props.stopLoader(),e.setState({showShippingandPaymentMethods:!0}),e.state.shipping_methods.salesRepresentativeEstimateShippingCosts.length&&e.getPayment(e.state.shipping_methods.salesRepresentativeEstimateShippingCosts[0].method_code,e.state.shipping_methods.salesRepresentativeEstimateShippingCosts[0].carrier_code,e.state.shipping_methods.salesRepresentativeEstimateShippingCosts[0].amount)}))}},{key:"setCustomerAddressValue",value:function(){var e=this,t=this.props,a=t.currentCustomer,n=t.cart;this.setStateValue("email",a.email),this.setStateValue("group",a.group_name),null!==n.coupon_code&&this.setState({couponStatus:!1,applyCouponMessage:!1,getDiscount:!0,getCouponButton:!1,coupon:n.coupon_code}),this.setState({allAddress:a.addresses}),this.props.startLoader(),a.addresses.forEach((function(t){t.region_name=t.region.region,t.region_code=t.region.region_code,t.region_id=t.region.region_id,!0===t.default_billing&&e.handleUpdate(ce,t),!0===t.default_shipping&&e.handleUpdate("shippingAddress",t)})),this.props.stopLoader()}},{key:"setVisibleOnFront",value:function(e){this.setState({visibleOnFront:e})}},{key:"setNotifyEmail",value:function(e){this.setState({notifyEmail:e})}},{key:"setStateValue",value:function(e,t){this.setState(S()({},e,t))}},{key:"setAppendComment",value:function(e){this.setState({append_comment:e})}},{key:"setEmailConfirm",value:function(e){this.setState({email_order_confirmation:e})}},{key:"setOrderHistory",value:function(e){this.setState({order_history:e})}},{key:"setCoupon",value:function(e){this.setState({coupon:e})}},{key:"handleUpdate",value:function(e,t){var a;this.setState((a={},S()(a,e,t),S()(a,"showShippingandPaymentMethods",!1),S()(a,"selected_payment_method",""),a))}},{key:"sameAsBillingCheck",value:function(e){var t=JSON.parse(JSON.stringify(this.state.shippingAddress)),a=JSON.parse(JSON.stringify(this.state[ce]));t.same_as_billing=0,1===e?(this.setState(S()({},Le,t)),(t=a).default_billing=!1,t.default_shipping=!0,t.same_as_billing=e,this.setState(S()({},"shippingAddress",t)),this.setState({isDisabledshipping:!0})):(this.setState({isDisabledshipping:!1}),this.setState(S()({},"shippingAddress",this.state[Le])))}},{key:"getPayment",value:function(e,t,a){var n=this;this.setState({shipping_amount:a});var s=JSON.parse(JSON.stringify(this.state[ce])),r=JSON.parse(JSON.stringify(this.state.shippingAddress));if(s.email=this.state.email,r.email=this.state.email,s.region=s.region_name,r.region=r.region_name,delete s.region_name,delete s.default_shipping,delete s.default_billing,delete s.id,delete s.customer_id,delete r.region_name,delete r.default_shipping,delete r.default_billing,delete r.id,delete r.customer_id,delete r.same_as_billing,""===this.state[ce]||""===this.state.shippingAddress)this.props.showErrorNotification("Please add proper Address");else try{Object(M.a)(ye.getSaveAddressInformation(this.props.customer_id,s,r,t,e)).then((function(e){n.setState({payment_method:e}),n.getCart()})).finally((function(){n.setState({showPaymentMethod:!0}),n.state.payment_method.salesRepresentativeSaveAddressInformation&&n.getSelectedPaymentMethod(n.state.payment_method.salesRepresentativeSaveAddressInformation.payment_methods[0].code)}))}catch(e){this.props.showErrorNotification(e.message)}}},{key:"getSelectedPaymentMethod",value:function(e){this.props.startLoader(),this.setState({selected_payment_method:e}),this.props.stopLoader()}},{key:"placeOrder",value:function(){var e=this,t=this.state,a=t.order_history,n=t.append_comment,s=t.email_order_confirmation,r=t.saveInAddressBook,i=t.selected_payment_method,o=t.notifyEmail,u=t.visibleOnFront,d=this.props,c=d.customer_id,l=d.currentCustomer,p=d.createCustomerAddress,m=d.showErrorNotification,h=JSON.parse(JSON.stringify(this.state[ce]));if(h.email=this.state.email,h.region=h.region_name,delete h.region_name,delete h.default_shipping,delete h.default_billing,delete h.id,delete h.customer_id,i){this.props.startLoader();try{Object(M.a)(ye.getSavePaymentInformationAndPlaceOrder(this.props.customer_id,h,i,s,n,a.length)).then((function(t){var s=t.salesRepresentativeSavePaymentInformationAndPlaceOrder;e.setState({orderData:t}),!0===n&&a&&a.length?Object(M.a)(ye.getAddOrderComment(c,parseInt(s.orderID),a,o,u)).then((function(){Pe.a.setItem(s,"salesRepCustomerOrderId"),e.props.stopLoader(),e.handleOrderPlacedAfter(s,i)})):(Pe.a.setItem(s,"salesRepCustomerOrderId"),e.props.stopLoader(),e.handleOrderPlacedAfter(s,i))})).finally((function(){if(!0===r.checked)try{"billing"===r.value?p(l.id,e.formatAddress(e.state[ce])):p(l.id,e.formatAddress(e.state.shippingAddress))}catch(e){m(e.message)}})).catch((function(t){t.forEach((function(e){var t=e.message;return m(t)})),e.props.stopLoader()}))}catch(e){this.props.showErrorNotification(e.message)}}else m("Please Add Payment Method")}},{key:"handleOrderPlacedAfter",value:function(e,t){var a="_default_order_handler";Object.keys(Oe).every((function(e){return e!==t||(a=e,!1)})),Oe[a].handle(e,this.props)}},{key:"formatAddress",value:function(e){var t=this.props.countries,a=JSON.parse(JSON.stringify(e));delete a.region_name,delete a.region_id;var n=t.find((function(t){return t.id===e.country_id}));if(n&&n.available_regions){var s=n.available_regions.find((function(t){return t.id==e.region_id}));a.region={region_code:s.code,region_id:s.id}}else a.region={region:e.region_name};return a}},{key:"handleSaveAddress",value:function(e,t){this.setState({saveInAddressBook:{checked:e,value:t}})}},{key:"getApplyCoupon",value:function(){var e=this,t=this.state.coupon,a=this.props.customer_id,n=t.toUpperCase();if(n)try{Object(M.a)(ye.getCustomerApplyCoupon(a,n)).then((function(t){e.setState({applyCouponMessage:t.salesRepresentativeCustomerApplyCoupon.status,couponMessage:t.salesRepresentativeCustomerApplyCoupon.message}),t.salesRepresentativeCustomerApplyCoupon.status?(e.setState({getDiscount:!0,getCouponButton:!1,couponStatus:!1}),e.props.showSuccessNotification(t.salesRepresentativeCustomerApplyCoupon.message)):(e.setState({getDiscount:!1,getCouponButton:!0,coupon:"",couponStatus:!0}),e.props.showErrorNotification(t.salesRepresentativeCustomerApplyCoupon.message)),e.getCart()}))}catch(e){this.props.showErrorNotification(e.message)}else this.props.showErrorNotification("Please Put Coupon First")}},{key:"getDiscount",value:function(){var e=this.state.getDiscount,t=this.props.cart;if(!0===e)return we(P.a,"div",{className:"grand-total-col"},we(P.a,"p",{className:"total-para discount-para"},"DISCOUNT: "),we(P.a,"p",{className:"total-res"},Object(q.a)(t.discount_amount,this.props.baseCurrencyCode)))}},{key:"getCouponButton",value:function(){var e=this,t=this.state.getCouponButton;return!0===t?we(P.a,"button",{className:"orderBtn",onClick:function(){e.getApplyCoupon()}},"Apply"):we(P.a,"p",{className:"remove-button",onClick:function(){e.RemoveCoupon()}},"Remove")}},{key:"getRemoveButton",value:function(){var e=this.state,t=e.couponStatus,a=e.coupon;e.applyCouponMessage;if(!1===t)return we(P.a,"div",{className:"coupon-details"},we(P.a,"div",{className:"remove-class"},we(P.a,"p",{className:"coupon-value"},a)))}},{key:"RemoveCoupon",value:function(){var e=this,t=this.props.customer_id;this.props.startLoader();try{Object(M.a)(ye.getCustomerRemoveCoupon(t)).then((function(t){t.salesRepresentativeCustomerRemoveCoupon.status?e.props.showSuccessNotification(t.salesRepresentativeCustomerRemoveCoupon.message):e.props.showErrorNotification(t.salesRepresentativeCustomerRemoveCoupon.message),e.getCart()})).finally(this.setState({couponStatus:!0,getDiscount:!1,getCouponButton:!0,couponMessage:"",coupon:""}))}catch(e){this.props.showErrorNotification(e.message)}this.props.stopLoader()}},{key:"getCart",value:(a=u()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.startLoader(),e.next=3,this.props.fetchCustomerCart(this.props.customer_id);case 3:this.props.stopLoader();case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"allAddressData",value:function(){var e=JSON.parse(JSON.stringify(this.state.allAddress)),t=[];if(t.unshift({label:" All New Address ",id:0,value:""}),e[0])return e.map((function(e,a){e.region_name=e.region.region,e.region_code=e.region.region_code,e.region_id=e.region.region_id,t[a+1]={label:e.company+" "+e.street+" "+e.city+" "+e.region.region+" "+e.postcode+" "+e.country_id,id:e.id,value:e.id}})),t}},{key:"allAddressFieldBilling",value:function(){var e=this;return we(P.a,ie.a,{type:"select",name:"all_address",selectOptions:this.allAddressData(),onChange:function(t){e.handleAddressChange("billing",t)},value:this.getSelectedAddress("billing")})}},{key:"allAddressFieldShipping",value:function(){var e=this;return we(P.a,ie.a,{type:"select",name:"all_address",selectOptions:this.allAddressData(),onChange:function(t){e.handleAddressChange("shipping",t)},value:this.getSelectedAddress("shipping")})}},{key:"handleAddressChange",value:function(e,t){"billing"===e?(this.setState({selectedAddressBilling:t}),""===t?this.handleUpdate(ce,""):this.setAddress(ce,t)):(this.setState({selectedAddressShipping:t}),""===t?this.handleUpdate("shippingAddress",""):this.setAddress("shippingAddress",t))}},{key:"setAddress",value:function(e,t){var a=this;this.props.currentCustomer.addresses.map((function(n){n.id===parseInt(t)&&(n.region_name=n.region.region,a.handleUpdate(e,n))}))}},{key:"getSelectedAddress",value:function(e){return"billing"===e?this.state.selectedAddressBilling:this.state.selectedAddressShipping}},{key:"getTaxAmount",value:function(){return we(P.a,"div",{className:"grand-total-col "},we(P.a,"p",{className:"total-para vat-para"},"VAT: "),we(P.a,"p",{className:"total-res"},Object(q.a)(this.props.cart.tax_amount,this.props.baseCurrencyCode)))}},{key:"getShippingAmount",value:function(){var e=this.state.shipping_amount;return e?we(P.a,"div",{className:"grand-total-col"},we(P.a,"p",{className:"total-para "},"SHIPPING AMOUNT: "),we(P.a,"p",{className:"total-res"},Object(q.a)(e,this.props.baseCurrencyCode))):""}},{key:"render",value:function(){var e=this;return we(P.a,"div",null,we(P.a,"div",{id:"account-information"},we(P.a,"div",{className:"header-row"},we(P.a,"div",{className:"header"},we(P.a,"h3",null,"ACCOUNT INFORMATION")),we(P.a,"div",{className:"group-email"},we(P.a,"div",{className:"group"},we(P.a,"p",null,"Group"),we(P.a,"input",{type:"text",id:"group",name:"group",placeholder:"",value:this.state.group,readOnly:!0})),we(P.a,"div",{className:"email"},we(P.a,"p",null,"Email"),we(P.a,"input",{type:"text",id:"email",name:"email",placeholder:"Email*",value:this.state.email,readOnly:!0})))),we(P.a,"div",{className:"form-div"},we(P.a,me,{handleNextTab:"",handleSaveAddress:this.handleSaveAddress.bind(this),handleUpdate:this.handleUpdate.bind(this),values:this.state[ce],isDisabled:this.state.isDisabledbilling,allAddressField:this.allAddressFieldBilling()}),we(P.a,ge,{handleNextTab:"",handleUpdate:this.handleUpdate.bind(this),handleSaveAddress:this.handleSaveAddress.bind(this),values:this.state.shippingAddress,sameAsBillingCheck:this.sameAsBillingCheck.bind(this),isDisabled:this.state.isDisabledshipping,allAddressField:this.allAddressFieldShipping()}),we(P.a,"div",{className:"account-row"},we(P.a,"div",{className:"header"},we(P.a,"h3",null,"SHIPPING METHOD")),we(P.a,"div",{className:"shipping-method-text"},this.state.showShippingandPaymentMethods?we(P.a,be,{shipping:this.state.shipping_methods,getPayment:this.getPayment.bind(this),currency:this.props.baseCurrencyCode}):we(P.a,"a",{onClick:function(){e.getShippingMutation()}},"Click Here To Get Shipping Methods"))),we(P.a,"div",{className:"account-row"},we(P.a,"div",{className:"header"},we(P.a,"h3",null,"PAYMENT METHOD")),we(P.a,"div",{className:"payment-method-field"},this.state.showPaymentMethod?we(P.a,Se,{paymentmethod:this.state.payment_method,currency:this.props.baseCurrencyCode,getSelectedPaymentMethod:this.getSelectedPaymentMethod.bind(this)}):we(P.a,"p",{className:"payment-text"},"Select a shipping Method to get Payment Methods"))),we(P.a,"div",{className:"apply-coupon-order-history"},we(P.a,"div",{className:"account-row"},we(P.a,"div",{className:"header"},we(P.a,"h3",null,"APPLY COUPON CODE")),we(P.a,"div",{className:"coupon-row"},we(P.a,ie.a,{type:"text",name:"coupon",id:"coupon",placeholder:"Coupon Code",value:this.state.coupon,onChange:function(t){e.setCoupon(t)}}),this.getCouponButton(),this.getRemoveButton())),we(P.a,"div",{className:"account-row"},we(P.a,"div",{className:"header"},we(P.a,"h3",null,"ORDER HISTORY")),we(P.a,ie.a,{type:"textarea",name:"order_history",id:"order_history",label:"Order Comment",value:this.state.order_history,onChange:function(t){e.setOrderHistory(t)}}),we(P.a,"div",null,we(P.a,"div",null,we(P.a,"label",{className:"order-comment-label"},we(P.a,ie.a,{type:"checkbox",id:"visible_on_front",name:"visible_on_front",placeholder:"Visible On Front",onChange:function(t,a){e.setVisibleOnFront(a)},value:this.state.visibleOnFront}),we(P.a,"span",null,"Visible On Front"))),we(P.a,"div",null,we(P.a,"label",{className:"order-comment-label"},we(P.a,ie.a,{type:"checkbox",id:"notify_email",name:"notify_email",placeholder:"Notify Email",checked:this.state.notifyEmail,onChange:function(t,a){e.setNotifyEmail(a)},value:this.state.notifyEmail}),we(P.a,"span",null,"Notify Email")))))),we(P.a,"div",{className:"account-row"},we(P.a,"div",{className:"header"},we(P.a,"h3",null,"ORDER TOTALS")),we(P.a,"div",{className:"total"},we(P.a,"div",{className:"total-row"},we(P.a,"div",{className:"grand-total-col"},we(P.a,"p",{className:"total-para subtotal-para"},"SUBTOTAL: "),we(P.a,"p",{className:"total-res"},Object(q.a)(this.props.cart.subtotal,this.props.baseCurrencyCode))),this.getDiscount(),this.getTaxAmount(),this.getShippingAmount(),we(P.a,"div",{className:"grand-total-col"},we(P.a,"p",{className:"total-para-grand"},"GRAND TOTAL: "),we(P.a,"p",{className:"total-res-grand"},Object(q.a)(this.props.cart.grand_total,this.props.baseCurrencyCode)))),we(P.a,"div",{className:"row-checkbox"},we(P.a,"div",{className:"col-checkbox"},we(P.a,"div",{className:"append-comment"},we(P.a,"label",{className:"append-comment-label"},we(P.a,ie.a,{type:"checkbox",id:"append_comment",name:"append_comment",placeholder:"Append Comment",checked:this.state.append_comment,onChange:function(t,a){e.setAppendComment(a)},value:this.state.append_comment}),we(P.a,"span",null,"Append Comment"))),we(P.a,"div",{className:"email-order"},we(P.a,"label",{className:"email-order-confirm-label"},we(P.a,ie.a,{type:"checkbox",id:"email_order_confirmation",name:"email_order_confirmation",placeholder:"Email Order Confirmation",value:this.state.email_order_confirmation,onChange:function(t,a){e.setEmailConfirm(a)},checked:this.state.email_order_confirmation}),we(P.a,"span",null,"Email Order Confirmation")))))),we(P.a,"button",{className:"orderBtnTotal",onClick:function(){e.placeOrder()}},"Submit Order")))))}}]),t}(N.Component),De=Object(ue.b)((function(e){return{currentCustomer:e.SalesRepCustomerReducer.currentCustomer,countries:e.ConfigReducer.countries,cart:e.SalesRepCustomerReducer.cart,baseCurrencyCode:e.ConfigReducer.base_currency_code}}),(function(e){return{createCustomerAddress:function(t,a){return Z.a.createCustomerAddress(e,t,a,!1)},updateCustomerAddress:function(t,a,n){return Z.a.updateCustomerAddress(e,t,a,n,!1)},showSuccessNotification:function(t){return e(Object(A.c)("success",t))},showErrorNotification:function(t){return e(Object(A.c)("error",t))},startLoader:function(){return Ne.a.startLoader(e)},stopLoader:function(){return Ne.a.stopLoader(e)},fetchCustomerCart:function(t){return Z.a.fetchCustomerCart(e,t)},setMeta:function(t){return ae.a.setMeta(e,t)}}}))(Object(_e.a)(Fe)),Ie=a(65),Re=(a(1089),a(890)),Be=a(43),Ee=a(80),xe=a(10).checkBEMProps,Me=function(e){function t(){var e;return c()(this,t),e=h()(this,g()(t).call(this)),S()(y()(e),"getOrderDataAssembled",(function(e){var t=[];return e.length&&e.map((function(e,a){t.push({index:a,orderId:e.base_order_info.increment_id||"-",orderTime:Object(Ee.a)(e.base_order_info.created_at.replace(/\s/,"T"),!0,!1)||"-"})})),t})),S()(y()(e),"getProductsAssembled",(function(e){return e=e.map((function(e){return e.check=!1,e}))})),S()(y()(e),"showProducts",(function(t){var a=e.props.order,n=e.getProductsAssembled(a[t].order_items);e.setState({products:JSON.parse(JSON.stringify(n)),popupDisplay:1})})),S()(y()(e),"goBack",(function(){e.setState({popupDisplay:0})})),e.state={popupDisplay:0,skuAdded:""},e}return b()(t,e),p()(t,[{key:"addProduct",value:function(e){var t=this.state.products;t.find((function(t){t.sku==e&&(t.check=!t.check)})),this.setState({products:t})}},{key:"addQty",value:function(e,t){var a=this.state.products;a.find((function(a){a.sku==t&&1==a.check&&(a.qty_ordered=e)})),this.setState({products:a})}},{key:"render",value:function(){var e=this,t=this.props,a=t.OrderPopupShow,n=t.order,s=t.loader,r=t.addProductLastOrder,i=t.close,o=this.state,u=o.products,d=o.popupDisplay;return n=this.getOrderDataAssembled(n),d?xe(P.a,"div",{className:"order-popup",style:{display:a?"block":"none"}},xe(P.a,"div",{className:"back-loader"},xe(P.a,"div",{className:"close-popup",onClick:function(){i()}}," ",xe(P.a,"span",{className:"close"},"×")),xe(P.a,"div",{onClick:this.goBack,className:"back"},xe(P.a,"i",{className:"left"})," Back"),xe(P.a,"div",{className:"productLoader",style:{visibility:s?"visible":"hidden"}},xe(P.a,"div",{className:"loader"}))),xe(P.a,"div",{className:"order-table"},xe(P.a,"table",null,xe(P.a,"tbody",null,u.length?xe(P.a,"tr",{className:"table-header"},xe(P.a,"th",null,"Name"),xe(P.a,"th",null,"Sku"),xe(P.a,"th",null,"Qty"),xe(P.a,"th",null,"Select")):"",u.length?u.map((function(t){return xe(P.a,"tr",{className:"table-data",key:t.sku},xe(P.a,"td",null,t.name),xe(P.a,"td",null,t.sku),xe(P.a,"td",null,xe(P.a,"input",{type:"number",value:t.qty_ordered,onChange:function(a){e.addQty(a.target.value,t.sku)}})),xe(P.a,"td",null,xe(P.a,"input",{type:"checkbox",checked:t.check,value:t.sku,onChange:function(t){e.addProduct(t.target.value)}})))})):xe(P.a,"tr",null,xe(P.a,"th",{className:"table-header",colSpan:"4"},"Sorry,No item found"))))),xe(P.a,"div",{className:"btn-message"},xe(P.a,"button",{className:"btn",onClick:function(){r(u)}},"Add To Cart List"))):xe(P.a,"div",{className:"order-popup",style:{display:a?"block":"none"}},xe(P.a,"div",{className:"close-popup",onClick:function(){i()}}," ",xe(P.a,"span",{className:"close"},"×")),xe(P.a,"div",{className:"order-table"},xe(P.a,"table",null,xe(P.a,"tbody",null,n.length?xe(P.a,"tr",{className:"table-header"},xe(P.a,"th",null,"Order Id"),xe(P.a,"th",null,"Order Time")):"",n.length?n.map((function(t){return xe(P.a,"tr",{className:"table-data",key:t.index,onClick:function(){e.showProducts(t.index)}},xe(P.a,"td",null,t.orderId),xe(P.a,"td",null,t.orderTime))})):xe(P.a,"tr",null,xe(P.a,"th",{className:"table-header",colSpan:"4"},"Sorry,No item found"))))))}}]),t}(N.Component),Te=a(10).checkBEMProps,qe=function(e){function t(e){var a;return c()(this,t),a=h()(this,g()(t).call(this,e)),S()(y()(a),"state",{selected:0,OrderPopupShow:0,order:[],popupSku:0,updatePopup:0,lastOrderLoader:0}),S()(y()(a),"selectTab",(function(e){a.setState((function(t){if(!e||t.selected)return{selected:e};a.child.nextAddToCart()}))})),S()(y()(a),"showPopup",(function(){a.setState((function(e){return{OrderPopupShow:e.OrderPopupShow?0:1}}))})),S()(y()(a),"addProductLastOrder",(function(e){var t=[],n={};e.filter((function(e){if(1==e.check)return t.push(e.sku),n[e.sku]=e.qty_ordered,e})),t.length?(a.setState({lastOrderLoader:1}),Object(M.b)(T.a.getProductBySku(t)).then((function(e){a.setState((function(t){return{popupSku:a.getDataAssembled(e.products,n),updatePopup:t.updatePopup+1,lastOrderLoader:0,selected:0,prevSelected:t.selected,OrderPopupShow:0}})),a.orderRef.goBack()}))):a.props.showNotification("error","Please Add product")})),S()(y()(a),"getDataAssembled",(function(e,t){var a=[];return e.items&&e.items.forEach((function(e,n){a[n]={id:e.id,qtytoadd:parseInt(t[e.sku]),qty:e.qty||"-",price:e.price.regularPrice.amount.value||"-",sku:e.sku||"-",name:e.name||"-",description:e.short_description.html||"-",action:"X"}})),a})),S()(y()(a),"cancelOrder",(function(){confirm("Are you sure you want to cancel order?")&&a.props.history.push("/salesrep")})),a.props.startLoader(),a.initStore(),a}var a;return b()(t,e),p()(t,[{key:"initStore",value:function(){var e=this.props.match.params.store;Be.a.set("mStoreInfo.currentStore",e)}},{key:"componentDidMount",value:function(){var e=this;this.onUpdate();var t=this.props,a=t.match.params.id,n=t.showNotification;Object(M.b)(Re.a.salesRepresentativeGetOrderList(a)).then((function(t){e.setState({order:t.salesRepresentativeGetOrderList.items.reverse().slice(0,10)||0})})).catch((function(e){e.forEach((function(e){n("error",e.message)}))}))}},{key:"onUpdate",value:(a=u()(i.a.mark((function e(){var t,a,n,s,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.currentCustomer,n=t.fetchCustomer,s=t.setCurrentCustomer,r=t.match.params.id,o=t.stopLoader,a&&a.id==r){e.next=6;break}return e.next=4,n(r);case 4:return e.next=6,s(r);case 6:o();case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"handleNextTab",value:function(e){this.setState({selected:e})}},{key:"getIdFromUrl",value:function(){return parseInt(this.props.match.params.id)}},{key:"renderCart",value:function(){var e=this,t=this.state,a=t.popupSku,n=t.updatePopup,r=t.prevSelected;return Te(P.a,F,{selected:this.state.selected,selectTab:this.selectTab},Te(P.a,D.a,{title:"ITEMS ORDERED"},Te(P.a,re,s()({},this.props,{allowTab:this.allowTab,popupSku:a,updatePopup:n,prevSelected:r,changePrevSelected:function(){e.setState({prevSelected:0})},handleNextTab:this.handleNextTab.bind(this),ref:function(t){return e.child=t}}))),Te(P.a,D.a,{title:"ACCOUNT INFORMATION"},Te(P.a,De,{notifyUpdate:this.onUpdate.bind(this),customer_id:this.getIdFromUrl()})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.OrderPopupShow,n=t.order,s=t.lastOrderLoader;t.selected;return Te(P.a,"div",{id:"SalesRepCustomerOrder",style:{backgroundImage:"url(".concat(Object(Ie.e)("/bg.png","salesrep"),")")}},Te(P.a,"div",{className:"form-header"},Te(P.a,"div",{className:"form-actions"},Te(P.a,"button",{type:"button",className:"cancel",onClick:this.cancelOrder},"Cancel"),Te(P.a,"div",{className:"order-button-popup"},Te(P.a,"button",{className:"last-ordered",onClick:this.showPopup},"Previous Orders"),Te(P.a,Me,{loader:s,OrderPopupShow:a,close:this.showPopup,addProductLastOrder:this.addProductLastOrder,order:n,ref:function(t){e.orderRef=t}})))),this.renderCart())}}]),t}(N.Component),Ve=Object(_e.a)(Object(ue.b)((function(e){return{currentCustomer:e.SalesRepCustomerReducer.currentCustomer,baseCurrencyCode:e.ConfigReducer.base_currency_code}}),(function(e){return{fetchCustomer:function(t){return Z.a.fetchCustomer(e,t)},setCurrentCustomer:function(t){return Z.a.setCurrentCustomer(e,t,!0)},showNotification:function(t,a){return e(Object(A.c)(t,a))},startLoader:function(){return Ne.a.startLoader(e)},stopLoader:function(){return Ne.a.stopLoader(e)}}}))(qe));a.d(t,"default",(function(){return Ve}))},879:function(e,t,a){"use strict";var n=a(4),s=a.n(n),r=a(5),i=a.n(r),o=a(7),u=a.n(o),d=a(6),c=a.n(d),l=a(8),p=a.n(l),m=a(1),h=a.n(m),f=a(299),g=(a(882),a(10).checkBEMProps),v=function(e){function t(){return s()(this,t),u()(this,c()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.columnData,a=e.pageData,n=e.addClass,s=e.sortCustomer,r=e.clickCustomer,i=e.componentNames,o=e.tableName,u=e.sortValue,d=e.sortNum,c=a.totalItems;return g(h.a,"div",{className:"sales-rep-customer "+n},g(h.a,"div",{className:"panel"},g(h.a,f.b,this.props),g(h.a,"div",{className:"customer-data"},g(h.a,"table",{className:"customer-table"},g(h.a,"thead",null,g(h.a,"tr",{className:"customer-display-row"},i.map((function(e){return g(h.a,"td",{className:"sorting",onClick:function(){s(e.key)}},e.name,g(h.a,"i",{style:{display:u==e.key?"block":"none"},className:d%2==0?"down":"up"}))})))),c?g(h.a,"tbody",{className:"customer-display"},t.map((function(e){return e.loading?g(h.a,"tr",null,g(h.a,"td",{rowSpan:"4"},"Loading....")):g(h.a,"tr",{key:e.id,onClick:function(){r(e.id)},className:"customer-display-row-data"},i.map((function(t){return t.html?g(h.a,"td",{className:"sorting",dangerouslySetInnerHTML:{__html:e[t.key]}}):t.action?g(h.a,"td",{className:"sorting action",onClick:function(){e[t.action](e[t.actionParameter])}},e[t.key]):g(h.a,"td",{className:"sorting"},e[t.key])})))}))):g(h.a,"tbody",null,g(h.a,"tr",null,g(h.a,"td",{colSpan:"4"},g(h.a,"h2",null,"No items found for ",o)))))),g(h.a,f.a,this.props)))}}]),t}(m.Component);t.a=v},880:function(e,t,a){"use strict";var n=a(12),s=a.n(n),r=a(4),i=a.n(r),o=a(5),u=a.n(o),d=a(7),c=a.n(d),l=a(6),p=a.n(l),m=a(3),h=a.n(m),f=a(8),g=a.n(f),v=a(2),y=a.n(v),k=a(1),b=a.n(k),C=a(879),S=a(88),N=a(98),P=a(9),_=new(function(){function e(){i()(this,e)}return u()(e,[{key:"deleteCustomerById",value:function(e){return new P.a("salesRepresentativeDeleteCustomer").addArgument("id","Int!",e).addFieldList(this.getQueryOutput())}},{key:"getQueryOutput",value:function(){return["status","message"]}}]),e}()),A=a(10).checkBEMProps,O=function(e){function t(e){var a;return i()(this,t),a=c()(this,p()(t).call(this,e)),y()(h()(a),"redirectPage",(function(e){a.props.history.replace(e)})),y()(h()(a),"sortCustomer",(function(e){var t=a.state.customerData.slice(0),n=a.state,s=n.sortValue,r=n.sortNum;t.sort((function(t,a){if(s==e&&r%2==0){var n=[a,t];t=n[0],a=n[1]}var i=t[e].toString().toLowerCase(),o=a[e].toString().toLowerCase();return i<o?-1:i>o?1:0})),a.setState((function(a){return a.sortValue==e?a.sortNum=a.sortNum+1:a.sortNum=0,{customerData:t,sortValue:e,sortNum:a.sortNum}}))})),y()(h()(a),"getDataAssembled",(function(e){var t=[];return e.forEach((function(e){var n=e.id,s=e.firstname,r=e.lastname,i=e.email,o=e.middlename,u=e.telephone,d=e.company,c=e.addresses,l=void 0===c?"":c,p=[],m=l.find((function(e){return!0===e.default_shipping}))||{};l.map((function(e){var t=e.city,a=e.company,n=e.firstname,s=e.lastname,r=e.fax,i=e.region.region,o=e.street,u=e.postcode,d=e.telephone;p.push(t,a,n,s,r,i,o,u,d)})),p.push(s,o,r,i,u,d),t.push({id:n,name:s+" "+r||"-",postcode:m.postcode||"-",state:m.region?m.region.region:"-",company:m.company||"-",telephone:m.telephone?"<a class='telephone' href='tel:"+m.telephone+"'>"+(m.telephone||"-")+"</a>":"",searchFields:p,delete:"X",action:a.deleteCustomer})})),t})),y()(h()(a),"deleteCustomer",(function(e){window.confirm("Are you sure to delete this customer?")&&Object(N.a)(_.deleteCustomerById(e)).then((function(){(0,a.props.fetchCustomer)().then((function(){a.setState({customerData:a.getDataAssembled(a.props.customers)})}))}))})),y()(h()(a),"search",(function(e){a.setState({search:e,currentPage:1})})),y()(h()(a),"changePage",(function(e){a.setState({currentPage:e})})),y()(h()(a),"pageLimit",(function(e){a.setState({pageSize:parseInt(e)}),S.a.setItem("SalesRepCustomerContainer.pageSize",e)})),y()(h()(a),"getSearchedData",(function(e,t){return t=t.toLowerCase(),{customerCount:(e=e.filter((function(e){var a=e.searchFields;return(void 0===a?"":a).toString().toLowerCase().includes(t)}))).length,customerData:e}})),y()(h()(a),"paginatedData",(function(e,t){return e.splice(t.startIndex,t.pageSize)})),y()(h()(a),"getSortedData",(function(e,t,n,s){var r=a.getSearchedData(e,t),i=a.getPaginated(n,s,r.customerCount);return{paginated:i,pageData:a.paginatedData(r.customerData,i)}})),y()(h()(a),"getPaginated",(function(e,t,a){var n,s,r=Math.ceil(a/t);if(e<1?e=1:e>r&&(e=r),r<=5)n=1,s=r;else{var i=Math.floor(2.5),o=Math.ceil(2.5)-1;e<=i?(n=1,s=5):e+o>=r?(n=r-5+1,s=r):(n=e-i,s=e+o)}var u=(e-1)*t,d=Math.min(u+t-1,a-1),c=Array.from(Array(s+1-n).keys()).map((function(e){return n+e}));return{totalItems:a,currentPage:e,pageSize:t,totalPages:r,startPage:n,endPage:s,startIndex:u,endIndex:d,pages:c}})),a.state={customerData:[{loading:1}],search:"",currentPage:1,sortValue:"",sortNum:0,pageSize:parseInt(S.a.getItem("SalesRepCustomerContainer.pageSize"))||50,pageSizeOptions:[5,10,20,50,100]},a}return g()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.fetchCustomer)().then((function(){e.setState({customerData:e.getDataAssembled(e.props.customers)})}))}},{key:"render",value:function(){var e=this.state,t=e.search,a=e.currentPage,n=e.pageSize,r=e.customerData,i=e.pageSizeOptions,o=e.sortNum,u=e.sortValue,d=this.getSortedData(r,t,a,n);return A(b.a,C.a,s()({},this.props,{addClass:"customer",search:this.search,sortValue:u,sortNum:o,pageLimit:this.pageLimit,columnData:d.pageData,redirectPage:this.redirectPage,changePage:this.changePage,pageData:d.paginated,tableName:"Customer",totalEntries:r.length,sortCustomer:this.sortCustomer,pageSize:n,pageSizeOptions:i,componentNames:[{name:"Name",key:"name"},{name:"Company Name",key:"company"},{name:"Telephone",key:"telephone",html:!0},{name:"Zip",key:"postcode"},{name:"State",key:"state"},{name:"Delete",key:"delete",action:"action",actionParameter:"id"}]}))}}]),t}(k.Component);a.d(t,"a",(function(){return O}))},881:function(e,t,a){"use strict";a.d(t,"b",(function(){return N})),a.d(t,"a",(function(){return _}));var n=a(2),s=a.n(n),r=a(4),i=a.n(r),o=a(5),u=a.n(o),d=a(7),c=a.n(d),l=a(6),p=a.n(l),m=a(8),h=a.n(m),f=a(11),g=a(109),v=a(71),y=a(55),k=a(44),b=a(1),C=a.n(b);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var N="billingAddress",P=a(10).checkBEMProps,_=function(e){function t(){return i()(this,t),c()(this,p()(t).apply(this,arguments))}return h()(t,e),u()(t,[{key:"getCountries",value:function(){return this.props.countries.map((function(e){return e.value=e.id,e}))}},{key:"findCountry",value:function(e){var t;return this.props.countries.map((function(a){a.id===e&&(t=a.label)})),t}},{key:"renderDashboard",value:function(){k.b.push("/salesrep/dashboard")}},{key:"getSectionName",value:function(){return N}},{key:"setFieldValue",value:function(e,t){var a=this.props.values;return this.props.handleUpdate(this.getSectionName(),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,s()({},e,t)))}},{key:"getFieldValue",value:function(e){return this.props.values[e]||""}},{key:"isDisabled",value:function(){return this.props.isDisabled}},{key:"renderActions",value:function(){return P(C.a,"div",{className:"address form-actions"},P(C.a,"div",{className:"action-btn"},P(C.a,"p",{className:"render-dashboard",onClick:this.renderDashboard},"Cancel"),P(C.a,"p",{className:"prev-btn",onClick:this.props.handlePreviousTab},"Previous"),P(C.a,"button",{className:"next-btn-action"},this.getButtonName())))}},{key:"renderInputField",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return P(C.a,v.a,{type:"text",id:e,name:e,placeholder:t,validation:n,onChange:function(t){return a.setFieldValue(e,t)},value:this.getFieldValue(e),isDisabled:this.isDisabled()})}},{key:"getTitle",value:function(){return"BILLING ADDRESS"}},{key:"renderCountryField",value:function(){var e=this,t="country_id",a=this.getCountries();return a.unshift({label:" Select Country* ",id:0,value:""}),!0===this.isDisabled()?P(C.a,v.a,{type:"text",id:t,name:t,value:this.findCountry(this.getFieldValue(t)),validation:["notEmpty"],onChange:function(a){return e.setFieldValue(t,a)},isDisabled:this.isDisabled()}):P(C.a,v.a,{type:"select",id:t,name:t,value:this.getFieldValue(t),selectOptions:a,validation:["notEmpty"],onChange:function(a){return e.setFieldValue(t,a)},isDisabled:this.isDisabled()})}},{key:"formatRegions",value:function(e){var t=e.available_regions.map((function(e){var t=e.id;e.code;return{label:e.name,id:t,value:t}}));return t.unshift({label:" Select Region* ",id:0,value:""}),t}},{key:"findRegion",value:function(e,t){var a=this.formatRegions(e).find((function(e){return e.id==t}));return a?a.label:t}},{key:"renderRegionField",value:function(){var e=this,t=this.getCountries().find((function(t){return t.id===e.getFieldValue("country_id")}));if(t&&t.available_regions){var a="region_id";return!0===this.isDisabled()?P(C.a,v.a,{type:"text",id:a,name:a,value:this.findRegion(t,this.getFieldValue(a)),onChange:function(t){return e.setFieldValue(a,t)},validation:["notEmpty"],isDisabled:this.isDisabled()}):P(C.a,v.a,{type:"select",id:a,name:a,value:this.getFieldValue(a),onChange:function(t){return e.setFieldValue(a,t)},validation:["notEmpty"],selectOptions:this.formatRegions(t)})}var n="region_name";return P(C.a,v.a,{type:"text",id:n,name:n,value:this.getFieldValue(n),onChange:function(t){return e.setFieldValue(n,t)},validation:["notEmpty"],placeholder:"State/Province*",isDisabled:this.isDisabled()})}},{key:"getButtonName",value:function(){return"Next"}},{key:"check",value:function(e,t){this.props.sameAsGeneralCheck(t)}},{key:"headerActions",value:function(){var e=this;return P(C.a,"div",{className:"same_address-action"},P(C.a,"label",{className:"same-address-label"},P(C.a,v.a,{type:"checkbox",id:"same_address",name:"same_address",placeholder:"Same As Billing Address",onChange:function(t,a){return e.check("same_address",a)},checked:this.props.checked}),P(C.a,"span",null,"Same As General Information")))}},{key:"extraField",value:function(){return null}},{key:"render",value:function(){var e=this.props.handleNextTab;return P(C.a,"div",{className:"billing-address"},P(C.a,y.a,{className:"Form FieldForm",onSubmitSuccess:e,mix:{block:"FieldForm"}},P(C.a,"div",{className:"form-header"},P(C.a,"div",{className:"form-heading"},P(C.a,"h3",null,this.getTitle())),P(C.a,"div",{className:"header-action"},this.headerActions())),P(C.a,"div",{className:"form-field"},this.extraField(),this.renderInputField("firstname","First Name*",["notEmpty"]),this.renderInputField("lastname","Last Name*",["notEmpty"]),this.renderInputField("city","City*",["notEmpty"]),this.renderRegionField(),this.renderInputField("telephone","Telephone*",["notEmpty","telephone"]),this.renderInputField("mobile","Mobile",["telephone"]),this.renderInputField("company","Business Name*",["notEmpty"]),this.renderInputField("street","Street Address*",["notEmpty"]),this.renderCountryField(),this.renderInputField("postcode","Zip/Postal Code*",["notEmpty","zipCode"]),this.renderInputField("fax","Fax"),this.renderInputField("vat_id","Vat")),this.renderActions()))}}]),t}(g.a);t.c=Object(f.b)((function(e){return{countries:e.ConfigReducer.countries}}),null)(_)},882:function(e,t,a){},887:function(e,t,a){"use strict";var n=a(4),s=a.n(n),r=a(5),i=a.n(r),o=a(7),u=a.n(o),d=a(6),c=a.n(d),l=a(3),p=a.n(l),m=a(8),h=a.n(m),f=a(2),g=a.n(f),v=a(1),y=a.n(v),k=a(10).checkBEMProps,b=function(e){function t(e){var a;return s()(this,t),a=u()(this,c()(t).call(this,e)),g()(p()(a),"changeState",(function(e){a.setState({selected:e})})),a.state={selected:a.props.selected},a}return h()(t,e),i()(t,[{key:"render",value:function(){var e=this;return k(y.a,"div",null,k(y.a,"ul",{className:"inline"},this.props.children.map((function(t,a){var n=a===e.state.selected?"selected":"";return k(y.a,"li",{onClick:e.handleChange.bind(e,a),className:n,key:a},t.props.title)}))),k(y.a,"div",{className:"tab"},this.props.children[this.state.selected]))}},{key:"handleChange",value:function(e){this.props.changeTab(e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.selected!==e.selected?{selected:e.selected}:null}}]),t}(v.Component);t.a=b},888:function(e,t,a){"use strict";var n=a(4),s=a.n(n),r=a(5),i=a.n(r),o=a(7),u=a.n(o),d=a(6),c=a.n(d),l=a(8),p=a.n(l),m=a(1),h=a.n(m),f=a(10).checkBEMProps,g=function(e){function t(){return s()(this,t),u()(this,c()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){return f(h.a,"div",null,this.props.children)}}]),t}(m.Component);t.a=g},890:function(e,t,a){"use strict";var n=a(4),s=a.n(n),r=a(5),i=a.n(r),o=a(9),u=function(){function e(){s()(this,e)}return i()(e,[{key:"salesRepresentativeGetOrderList",value:function(e){return new o.a("salesRepresentativeGetOrderList").addArgument("customerId","Int!",e).addFieldList(this.getOrderOutputFields())}},{key:"salesRepresentativeReOrder",value:function(e,t){return new o.a("salesRepresentativeReorder").addArgument("customerId","Int!",e).addArgument("orderId","Int!",t).addFieldList(["base_currency_code"])}},{key:"getOrderOutputFields",value:function(){return[new o.a("items").addFieldList([new o.a("base_order_info").addFieldList(["grand_total","created_at","id","increment_id"]),new o.a("order_items").addFieldList(["name","sku","qty_ordered"]),new o.a("payment_info").addFieldList(["cc_owner","cc_last_4","cc_type",new o.a("additional_information").addFieldList([new o.a("customer_info").addFieldList(["first_name","middle_name","last_name"])])]),new o.a("shipping_info").addFieldList([new o.a("shipping_address").addFieldList(["firstname","middlename","lastname"])])])]}}]),e}();t.a=new u},891:function(e,t,a){"use strict";var n=a(4),s=a.n(n),r=a(5),i=a.n(r),o=a(9),u=function(){function e(){s()(this,e)}return i()(e,[{key:"getProducts",value:function(e,t,a,n,s){var r=s?{price:{gteq:0},custom_filter:[{attribute:"brand",condition:{in:s}}]}:{price:{gteq:0}};return a?new o.a("products").addArgument("filter","ProductFilterInput!",r).addArgument("pageSize","Int!",e).addArgument("currentPage","Int!",t).addArgument("search","String!",a).addArgument("sort","ProductSortInput!",n).addFieldList(this.getProductOutputFields()):new o.a("products").addArgument("filter","ProductFilterInput!",r).addArgument("pageSize","Int!",e).addArgument("currentPage","Int!",t).addArgument("sort","ProductSortInput!",n).addFieldList(this.getProductOutputFields())}},{key:"getBrand",value:function(){return new o.a("products").addArgument("filter","ProductFilterInput!",{price:{eq:0}}).addFieldList(this.getBrandOutputFields())}},{key:"getBrandOutputFields",value:function(){return[new o.a("all_filters").addFieldList(["name","request_var",new o.a("filter_items").addFieldList(["label","value_string"])])]}},{key:"getProductBySku",value:function(e){var t={sku:{in:e}};return new o.a("products").addArgument("filter","ProductFilterInput!",t).addFieldList(this.getProductOutputFields())}},{key:"getProductOutputFields",value:function(){return["total_count",new o.a("items").addFieldList(["id","qty","sku","name",new o.a("short_description").addFieldList(["html"]),new o.a("price").addFieldList([new o.a("regularPrice").addFieldList([new o.a("amount").addFieldList(["currency","value"])])])])]}}]),e}();t.a=new u},899:function(e,t,a){"use strict";var n=a(12),s=a.n(n),r=a(4),i=a.n(r),o=a(5),u=a.n(o),d=a(7),c=a.n(d),l=a(6),p=a.n(l),m=a(3),h=a.n(m),f=a(8),g=a.n(f),v=a(2),y=a.n(v),k=a(1),b=a.n(k),C=a(903),S=a(98),N=a(891),P=a(332),_=a(10).checkBEMProps,A=function(e){function t(e){var a;return i()(this,t),a=c()(this,p()(t).call(this,e)),y()(h()(a),"getBundleSku",(function(e){a.setState({bundledSku:e})})),y()(h()(a),"getListSku",(function(e,t,n){var s=a.props,r=s.startLoader,i=s.stopLoader;r(),Object(S.b)(N.a.getProductBySku(e)).then((function(e){if(i(),e.products.total_count){var s=a.props,r=s.addBulkItemCart,o=s.baseCurrencyCode;r(a.getDataAssembled(e.products,o),t),a.setState({bundledSku:""})}else{(0,a.props.showNotification)("error",n?"Invalid SKU,Please add SKU with ',' seperated":"Please add a valid CSV file")}}))})),y()(h()(a),"saveSku",(function(){var e,t,n=a.state.bundledSku.split(/\s+/).join(","),s=[],r={};(n=n.split(",")).forEach((function(a){e=a.split(":"),t=e[0].toLowerCase(),s.push(t),r[t]?r[t]=r[t]+(parseInt(e[1])||(0==e[1]?0:1)):r[t]=parseInt(e[1])||1})),a.getListSku(s,r,1)})),y()(h()(a),"getDataAssembled",(function(e,t){var a=[];return e.items&&e.items.forEach((function(e,n){a[n]={id:e.id,qtytoadd:1,qty:e.qty||"-",price:Object(P.a)(e.price.regularPrice.amount.value,t)||"-",sku:e.sku||"-",name:e.name||"-",description:e.short_description.html||"-",action:"X"}})),a})),y()(h()(a),"getCsvData",(function(e){a.setState({csvData:e})})),y()(h()(a),"addCsvDataToList",(function(){var e=a.state.csvData;if(e){var t,n={sku:-1,qty:-1},s=[],r={};e[0].data.map((function(e,t){"sku"==(e=e.toLowerCase())&&(n.sku=t),"quantity"!=e&&"qty"!=e||(n.qty=t)})),e.map((function(e){(t=e.data[n.sku])&&(t=t.toLowerCase()),t&&(r[t]?r[t]=r[t]+parseInt(e.data[n.qty]):r[t]=parseInt(e.data[n.qty])||0,s.push(t))})),a.getListSku(s,r,0)}else a.props.showNotification("error","Please Upload Csv")})),a.state={search:"",bundledSku:"",csvData:0},a}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.state.bundledSku;return _(b.a,b.a.Fragment,null,_(b.a,C.a,s()({},this.props,{bundledSku:e,saveSku:this.saveSku,getBundleSku:this.getBundleSku,getCsvData:this.getCsvData,addCsvDataToList:this.addCsvDataToList})))}}]),t}(k.Component);t.a=A},903:function(e,t,a){"use strict";var n=a(4),s=a.n(n),r=a(5),i=a.n(r),o=a(7),u=a.n(o),d=a(6),c=a.n(d),l=a(8),p=a.n(l),m=a(1),h=a.n(m),f=a(3),g=a.n(f),v=a(2),y=a.n(v),k=a(952),b=(a(922),k.a,a(10).checkBEMProps),C=function(e){function t(e){var a;return s()(this,t),a=u()(this,c()(t).call(this,e)),y()(g()(a),"state",{isFileUploaded:!1}),y()(g()(a),"handleOnError",(function(e,t,n,s){a.setState({isFileUploaded:!1})})),y()(g()(a),"handleOpenDialog",(function(e){a.buttonRef.current.open(e)})),y()(g()(a),"onFileLoad",(function(e){(0,a.props.getCsvData)(e),a.setState({isFileUploaded:!0})})),y()(g()(a),"onFileRemove",(function(e){a.buttonRef.current&&(a.buttonRef.current.removeFile(e),a.setState({isFileUploaded:!1}))})),a.buttonRef=h.a.createRef(),a}return p()(t,e),i()(t,[{key:"renderFileActionButton",value:function(){return this.state.isFileUploaded?b(h.a,"button",{type:"button",className:"csvblueBtn",onClick:this.onFileRemove},"Remove File"):b(h.a,"button",{type:"button",className:"csvblueBtn",onClick:this.handleOpenDialog},"Choose File")}},{key:"render",value:function(){var e=this;return b(h.a,"div",{id:"salesRepUploadCsv"},b(h.a,"p",null,"Upload Bulk Product"),b(h.a,k.a,{ref:this.buttonRef,onFileLoad:this.onFileLoad,onError:this.handleOnError,onRemoveFile:function(){},noClick:!0,noDrag:!0},(function(t){var a=t.file;return b(h.a,"aside",{style:{display:"flex",flexDirection:"row",marginBottom:10}},e.renderFileActionButton(),b(h.a,"div",{className:"showUpload"},a?a.name:""),b(h.a,"a",{href:"/media/salesrep/sample.csv",style:{display:a&&a.name&&"none"}},"Download Sample File"))})))}}]),t}(m.Component),S=(a(923),a(10).checkBEMProps),N=function(e){function t(){return s()(this,t),u()(this,c()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.saveSku,a=e.getBundleSku,n=e.bundledSku,s=e.nextAddToCart,r=e.addCsvDataToList;return S(h.a,"div",{id:"SalesRepBulkOrder"},S(h.a,"div",{className:"addsku"},S(h.a,"div",{className:"bundle-sku"},S(h.a,"div",{className:"add-by-sku"},S(h.a,"p",null,"Enter multiple SKUs"),S(h.a,"textarea",{value:n,placeholder:"For Example: 11M18:2,11M19:9, ... ",onChange:function(e){a(e.target.value)}})),S(h.a,"div",{className:"bundle-btn"},S(h.a,"button",{className:"blueBtn",onClick:t},"Add to Cart List"))),S(h.a,"div",null,S(h.a,C,this.props),S(h.a,"button",{type:"button",className:"blueBtn",onClick:r},"Add to Cart List")),S(h.a,"div",{className:"button-next"},S(h.a,"button",{className:"btn",onClick:s},"Next"))))}}]),t}(m.Component);t.a=N},922:function(e,t,a){},923:function(e,t,a){},957:function(e,t){},958:function(e,t){}}]);