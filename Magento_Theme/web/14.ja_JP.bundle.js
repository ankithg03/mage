(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1132:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),s=a(4),o=a.n(s),u=a(5),i=a.n(u),c=a(7),l=a.n(c),m=a(6),p=a.n(m),d=a(3),h=a.n(d),g=a(8),f=a.n(g),y=a(2),C=a.n(y),v=a(193),k=a(1),N=a.n(k),S=a(134),D=a(880),w=a(331),P=a(898),b=a(65),M=a(177),I=a(10).checkBEMProps,z=function(e){function t(){var e,a;o()(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a=l()(this,(e=p()(t)).call.apply(e,[this].concat(r))),C()(h()(a),"clickCustomer",(function(e){["sorting action","telephone"].includes(event.target.className)||a.props.history.push("/salesrep/customer/edit/"+e)})),a}return f()(t,e),i()(t,[{key:"componentDidMount",value:function(){(0,this.props.setMeta)({title:"Edit Customer"})}},{key:"componentWillUnmount",value:function(){(0,this.props.setMeta)(null)}},{key:"render",value:function(){return I(N.a,"div",{style:{backgroundImage:"url(".concat(Object(b.e)("/bg.png","salesrep"),")")}},I(N.a,P.a,null),I(N.a,D.a,r()({},this.props,{clickCustomer:this.clickCustomer})))}}]),t}(k.Component),L=Object(S.a)(Object(v.a)((function(e){return{customers:e.SalesRepCustomerReducer.customers}}),(function(e){return{fetchCustomer:function(t){return w.a.fetchCustomer(e,null)},setMeta:function(t){return M.a.setMeta(e,t)}}}))(z));a.d(t,"default",(function(){return L}))},879:function(e,t,a){"use strict";var n=a(4),r=a.n(n),s=a(5),o=a.n(s),u=a(7),i=a.n(u),c=a(6),l=a.n(c),m=a(8),p=a.n(m),d=a(1),h=a.n(d),g=a(299),f=(a(882),a(10).checkBEMProps),y=function(e){function t(){return r()(this,t),i()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.columnData,a=e.pageData,n=e.addClass,r=e.sortCustomer,s=e.clickCustomer,o=e.componentNames,u=e.tableName,i=e.sortValue,c=e.sortNum,l=a.totalItems;return f(h.a,"div",{className:"sales-rep-customer "+n},f(h.a,"div",{className:"panel"},f(h.a,g.b,this.props),f(h.a,"div",{className:"customer-data"},f(h.a,"table",{className:"customer-table"},f(h.a,"thead",null,f(h.a,"tr",{className:"customer-display-row"},o.map((function(e){return f(h.a,"td",{className:"sorting",onClick:function(){r(e.key)}},e.name,f(h.a,"i",{style:{display:i==e.key?"block":"none"},className:c%2==0?"down":"up"}))})))),l?f(h.a,"tbody",{className:"customer-display"},t.map((function(e){return e.loading?f(h.a,"tr",null,f(h.a,"td",{rowSpan:"4"},"Loading....")):f(h.a,"tr",{key:e.id,onClick:function(){s(e.id)},className:"customer-display-row-data"},o.map((function(t){return t.html?f(h.a,"td",{className:"sorting",dangerouslySetInnerHTML:{__html:e[t.key]}}):t.action?f(h.a,"td",{className:"sorting action",onClick:function(){e[t.action](e[t.actionParameter])}},e[t.key]):f(h.a,"td",{className:"sorting"},e[t.key])})))}))):f(h.a,"tbody",null,f(h.a,"tr",null,f(h.a,"td",{colSpan:"4"},f(h.a,"h2",null,"No items found for ",u)))))),f(h.a,g.a,this.props)))}}]),t}(d.Component);t.a=y},880:function(e,t,a){"use strict";var n=a(12),r=a.n(n),s=a(4),o=a.n(s),u=a(5),i=a.n(u),c=a(7),l=a.n(c),m=a(6),p=a.n(m),d=a(3),h=a.n(d),g=a(8),f=a.n(g),y=a(2),C=a.n(y),v=a(1),k=a.n(v),N=a(879),S=a(88),D=a(98),w=a(9),P=new(function(){function e(){o()(this,e)}return i()(e,[{key:"deleteCustomerById",value:function(e){return new w.a("salesRepresentativeDeleteCustomer").addArgument("id","Int!",e).addFieldList(this.getQueryOutput())}},{key:"getQueryOutput",value:function(){return["status","message"]}}]),e}()),b=a(10).checkBEMProps,M=function(e){function t(e){var a;return o()(this,t),a=l()(this,p()(t).call(this,e)),C()(h()(a),"redirectPage",(function(e){a.props.history.replace(e)})),C()(h()(a),"sortCustomer",(function(e){var t=a.state.customerData.slice(0),n=a.state,r=n.sortValue,s=n.sortNum;t.sort((function(t,a){if(r==e&&s%2==0){var n=[a,t];t=n[0],a=n[1]}var o=t[e].toString().toLowerCase(),u=a[e].toString().toLowerCase();return o<u?-1:o>u?1:0})),a.setState((function(a){return a.sortValue==e?a.sortNum=a.sortNum+1:a.sortNum=0,{customerData:t,sortValue:e,sortNum:a.sortNum}}))})),C()(h()(a),"getDataAssembled",(function(e){var t=[];return e.forEach((function(e){var n=e.id,r=e.firstname,s=e.lastname,o=e.email,u=e.middlename,i=e.telephone,c=e.company,l=e.addresses,m=void 0===l?"":l,p=[],d=m.find((function(e){return!0===e.default_shipping}))||{};m.map((function(e){var t=e.city,a=e.company,n=e.firstname,r=e.lastname,s=e.fax,o=e.region.region,u=e.street,i=e.postcode,c=e.telephone;p.push(t,a,n,r,s,o,u,i,c)})),p.push(r,u,s,o,i,c),t.push({id:n,name:r+" "+s||"-",postcode:d.postcode||"-",state:d.region?d.region.region:"-",company:d.company||"-",telephone:d.telephone?"<a class='telephone' href='tel:"+d.telephone+"'>"+(d.telephone||"-")+"</a>":"",searchFields:p,delete:"X",action:a.deleteCustomer})})),t})),C()(h()(a),"deleteCustomer",(function(e){window.confirm("Are you sure to delete this customer?")&&Object(D.a)(P.deleteCustomerById(e)).then((function(){(0,a.props.fetchCustomer)().then((function(){a.setState({customerData:a.getDataAssembled(a.props.customers)})}))}))})),C()(h()(a),"search",(function(e){a.setState({search:e,currentPage:1})})),C()(h()(a),"changePage",(function(e){a.setState({currentPage:e})})),C()(h()(a),"pageLimit",(function(e){a.setState({pageSize:parseInt(e)}),S.a.setItem("SalesRepCustomerContainer.pageSize",e)})),C()(h()(a),"getSearchedData",(function(e,t){return t=t.toLowerCase(),{customerCount:(e=e.filter((function(e){var a=e.searchFields;return(void 0===a?"":a).toString().toLowerCase().includes(t)}))).length,customerData:e}})),C()(h()(a),"paginatedData",(function(e,t){return e.splice(t.startIndex,t.pageSize)})),C()(h()(a),"getSortedData",(function(e,t,n,r){var s=a.getSearchedData(e,t),o=a.getPaginated(n,r,s.customerCount);return{paginated:o,pageData:a.paginatedData(s.customerData,o)}})),C()(h()(a),"getPaginated",(function(e,t,a){var n,r,s=Math.ceil(a/t);if(e<1?e=1:e>s&&(e=s),s<=5)n=1,r=s;else{var o=Math.floor(2.5),u=Math.ceil(2.5)-1;e<=o?(n=1,r=5):e+u>=s?(n=s-5+1,r=s):(n=e-o,r=e+u)}var i=(e-1)*t,c=Math.min(i+t-1,a-1),l=Array.from(Array(r+1-n).keys()).map((function(e){return n+e}));return{totalItems:a,currentPage:e,pageSize:t,totalPages:s,startPage:n,endPage:r,startIndex:i,endIndex:c,pages:l}})),a.state={customerData:[{loading:1}],search:"",currentPage:1,sortValue:"",sortNum:0,pageSize:parseInt(S.a.getItem("SalesRepCustomerContainer.pageSize"))||50,pageSizeOptions:[5,10,20,50,100]},a}return f()(t,e),i()(t,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.fetchCustomer)().then((function(){e.setState({customerData:e.getDataAssembled(e.props.customers)})}))}},{key:"render",value:function(){var e=this.state,t=e.search,a=e.currentPage,n=e.pageSize,s=e.customerData,o=e.pageSizeOptions,u=e.sortNum,i=e.sortValue,c=this.getSortedData(s,t,a,n);return b(k.a,N.a,r()({},this.props,{addClass:"customer",search:this.search,sortValue:i,sortNum:u,pageLimit:this.pageLimit,columnData:c.pageData,redirectPage:this.redirectPage,changePage:this.changePage,pageData:c.paginated,tableName:"Customer",totalEntries:s.length,sortCustomer:this.sortCustomer,pageSize:n,pageSizeOptions:o,componentNames:[{name:"Name",key:"name"},{name:"Company Name",key:"company"},{name:"Telephone",key:"telephone",html:!0},{name:"Zip",key:"postcode"},{name:"State",key:"state"},{name:"Delete",key:"delete",action:"action",actionParameter:"id"}]}))}}]),t}(v.Component);a.d(t,"a",(function(){return M}))},882:function(e,t,a){},898:function(e,t,a){"use strict";var n=a(4),r=a.n(n),s=a(5),o=a.n(s),u=a(7),i=a.n(u),c=a(6),l=a.n(c),m=a(8),p=a.n(m),d=a(1),h=a.n(d),g=(a(918),a(20)),f=a(10).checkBEMProps,y=function(e){function t(){return r()(this,t),i()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){return f(h.a,"div",{className:"SalesRepCustHeader"},f(h.a,"div",{className:"title"},f(h.a,"h2",null," Select Customer "),f(h.a,"div",{className:"buttons"},f(h.a,g.a,{to:"/salesrep/dashboard"},f(h.a,"span",{className:"cancel"},"Cancel")),f(h.a,g.a,{to:"/salesrep/customer/new"},f(h.a,"span",{className:"new-customer"},"Create New Customer")))))}}]),t}(d.Component);t.a=y},918:function(e,t,a){}}]);